<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThemeX Professional Alert</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #FF0000;
            --glass: rgba(255, 255, 255, 0.04);
            --muted: #000000;
            --radius: 12px;
            --bg-blur: 12px;
            --comp-width: 400px;
        }
        body {
            margin: 0;
            padding: 10px;
            font-family: 'Inter', sans-serif;
            background-color: transparent;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }
        .alert-container {
            width: var(--comp-width);
            max-width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            padding: 16px 20px;
            outline: var(--accent) 2px solid;
            border-radius: var(--radius);
            font-size: 0.95rem;
            line-height: 1.5;
            backdrop-filter: blur(var(--bg-blur));
            -webkit-backdrop-filter: blur(var(--bg-blur));
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--muted);
            animation: slideIn 0.4s ease-out forwards;
        }
        .alert-container::before {
            content: "";
            position: absolute;
            left: 0; top: 20%; height: 60%; width: 4px;
            background: var(--accent);
            border-radius: 0 4px 4px 0;
        }
        .alert-icon { font-size: 1.25rem; margin-right: 16px; color: var(--accent); display: flex; align-items: center; }
        .alert-content { flex: 1; font-weight: 500; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="alert-container" id="alert-box">
    <div class="alert-icon"><i id="alert-icon" class="fas fa-info-circle"></i></div>
    <div class="alert-content" id="alert-message">Loading...</div>
</div>

<script>
    const updateUI = () => {
        const params = new URLSearchParams(window.location.search);
        const root = document.documentElement;

        // 1. WIDTH BRIDGE
        const desktopWidth = params.get('width') || '400';
        const androidWidth = params.get('android_width') || '95%';
        const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
        
        if (isMobile) {
            root.style.setProperty('--comp-width', androidWidth.includes('%') ? androidWidth : androidWidth + 'px');
        } else {
            root.style.setProperty('--comp-width', desktopWidth.includes('%') ? desktopWidth : desktopWidth + 'px');
        }

        // 2. STYLE BRIDGE
        const styleMap = { 'accent_color': '--accent', 'glass_color': '--glass', 'muted_color': '--muted', 'radius': '--radius' };
        Object.keys(styleMap).forEach(key => {
            const val = params.get(key);
            if (val) {
                let final = val;
                if (/^[0-9A-Fa-f]{3,8}$/.test(val)) final = `#${val}`;
                if (key === 'radius' && !isNaN(val)) final += 'px';
                root.style.setProperty(styleMap[key], final);
            }
        });

        // 3. CONTENT LOGIC
        const type = params.get("type") || "info";
        document.getElementById("alert-message").textContent = decodeURIComponent(params.get("message") || "Default message.");
        const icons = { success: "check-circle", error: "exclamation-circle", warning: "triangle-exclamation", info: "circle-info" };
        document.getElementById("alert-icon").className = `fas fa-${icons[type] || icons.info}`;
    };

    // 4. RESIZE OBSERVER
    const params = new URLSearchParams(window.location.search);
    const frameId = params.get('frame_id');
    if (frameId && window.parent) {
        new ResizeObserver(() => {
            window.parent.postMessage({ frameId, frameHeight: Math.ceil(document.body.offsetHeight) }, '*');
        }).observe(document.body);
    }

    document.addEventListener('DOMContentLoaded', updateUI);
</script>
</body>
</html>